{"version":3,"file":"static/js/398.30efe6f0.chunk.js","mappings":"0QAUMA,EAAKC,IAAAA,KCTX,CAAgB,QAAU,yBAAyB,YAAY,2BAA2B,eAAe,8BAA8B,gBAAgB,+BAA+B,MAAQ,yBD4F9L,MAjFA,WACI,OAA0BC,EAAAA,EAAAA,UAAS,IAAG,eAA/BC,EAAK,KAAEC,EAAQ,KACtB,GAAkDF,EAAAA,EAAAA,UAAS,IAAG,eAAvDG,EAAiB,KAAEC,EAAoB,KAExCC,GAAMC,EAAAA,EAAAA,OAEZC,EAAAA,EAAAA,YAAU,WACN,IAAMC,GAAaC,EAAAA,EAAAA,KAAWC,EAAAA,EAAAA,IAAWC,EAAAA,GAAI,UAAU,SAACC,GACpD,IAAIC,EAAW,GACfD,EAASE,SAAQ,SAACC,GACdF,EAASG,MAAK,QACVC,GAAIF,EAAIE,IACLF,EAAIG,QAEf,IACAhB,EAASW,EACb,IAEA,OAAO,kBAAML,GAAa,CAC9B,GAAG,IAEH,IAAMW,EAAe,SAACC,GAClB,IAAMC,EAAYC,SAASC,KAAKF,WAAaC,SAASE,gBAAgBH,UAChEI,EAAeH,SAASE,gBAAgBC,aACxCC,EAAeJ,SAASE,gBAAgBE,aAE3BC,KAAKC,MAAOP,GAAaI,EAAeC,GAAiB,MAC1D,IACdtB,GAAqB,SAACyB,GAAS,OAAKA,EAAY,CAAC,GAEzD,EAQA,OANAtB,EAAAA,EAAAA,YAAU,WAGN,OAFAuB,OAAOC,iBAAiB,SAAUZ,GAE3B,kBAAMW,OAAOE,oBAAoB,SAAUb,EAAc,CACpE,KAGI,gBAAKc,UAAWnC,EAAG,WAAW,UAC1B,gBAAKmC,UAAWnC,EAAG,aAAa,SAC3BG,GACGA,EAAMiC,KAAI,SAACC,EAAMC,GACb,OAAIA,GAASjC,GACF,SAAC,EAAAkC,SAAQ,GAAMD,GAElB,OAAJD,QAAI,IAAJA,GAAAA,EAAMG,IAAI,GAAGC,KAAKC,SAAS,UAEvB,iBAEIP,UAAWnC,EAAG,eAAgB,eAC9B2C,QAAS,SAACrB,GACNf,EAAI,IAAD,OAAS,OAAJ8B,QAAI,IAAJA,OAAI,EAAJA,EAAMlB,IAClB,EAAE,WAEG,OAAJkB,QAAI,IAAJA,OAAI,EAAJA,EAAMG,IAAII,QAAS,IAAK,cAAGT,UAAWnC,EAAG,iBAAiB,SAAE6C,EAAAA,MAC7D,gBAAKC,IAAI,WAAWC,IAAS,OAAJV,QAAI,IAAJA,OAAI,EAAJA,EAAMG,IAAI,GAAGO,QAP7B,OAAJV,QAAI,IAAJA,OAAI,EAAJA,EAAMlB,KAYf,iBAEIgB,UAAWnC,EAAG,eAAgB,iBAC9B2C,QAAS,SAACrB,GACNf,EAAI,IAAD,OAAS,OAAJ8B,QAAI,IAAJA,OAAI,EAAJA,EAAMlB,IAClB,EAAE,WAEG,OAAJkB,QAAI,IAAJA,OAAI,EAAJA,EAAMG,IAAII,QAAS,IAAK,cAAGT,UAAWnC,EAAG,iBAAiB,SAAE6C,EAAAA,MAC7D,kBAAOG,MAAM,MAAMC,OAAK,EAACd,UAAWnC,EAAG,SAAS,UAC5C,mBAAQ+C,IAAS,OAAJV,QAAI,IAAJA,OAAI,EAAJA,EAAMG,IAAI,GAAGO,IAAKN,KAAK,kBAR/B,OAAJJ,QAAI,IAAJA,OAAI,EAAJA,EAAMlB,GAa3B,OAIpB,C","sources":["pages/Explore/Explore.js","webpack://instagram-clone/./src/pages/Explore/Explore.module.scss?d931"],"sourcesContent":["import classNames from 'classnames/bind';\r\nimport styles from './Explore.module.scss';\r\n\r\nimport { useState, useEffect, Fragment } from 'react';\r\nimport { onSnapshot, collection } from 'firebase/firestore';\r\nimport { db } from '../../firebase';\r\n\r\nimport { ListIcon } from '../../assets/Icons/Icons';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nconst cx = classNames.bind(styles);\r\n\r\nfunction Explore() {\r\n    const [posts, setPosts] = useState([]);\r\n    const [indexPostObserved, setIndexPostObserved] = useState(15);\r\n\r\n    const nav = useNavigate();\r\n\r\n    useEffect(() => {\r\n        const unsubcribe = onSnapshot(collection(db, 'posts'), (snapshot) => {\r\n            let newPosts = [];\r\n            snapshot.forEach((doc) => {\r\n                newPosts.push({\r\n                    id: doc.id,\r\n                    ...doc.data(),\r\n                });\r\n            });\r\n            setPosts(newPosts);\r\n        });\r\n\r\n        return () => unsubcribe();\r\n    }, []);\r\n\r\n    const handleScroll = (e) => {\r\n        const scrollTop = document.body.scrollTop || document.documentElement.scrollTop;\r\n        const scrollHeight = document.documentElement.scrollHeight;\r\n        const clientHeight = document.documentElement.clientHeight;\r\n\r\n        const percentage = Math.floor((scrollTop / (scrollHeight - clientHeight)) * 100);\r\n        if (percentage >= 90) {\r\n            setIndexPostObserved((prevIndex) => prevIndex + 9);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        window.addEventListener('scroll', handleScroll);\r\n\r\n        return () => window.removeEventListener('scroll', handleScroll);\r\n    });\r\n\r\n    return (\r\n        <div className={cx('wrapper')}>\r\n            <div className={cx('post-list')}>\r\n                {posts &&\r\n                    posts.map((post, index) => {\r\n                        if (index >= indexPostObserved) {\r\n                            return <Fragment key={index}></Fragment>;\r\n                        }\r\n                        if (post?.url[0].type.includes('image')) {\r\n                            return (\r\n                                <div\r\n                                    key={post?.id}\r\n                                    className={cx('post-wrapper', 'img-wrapper')}\r\n                                    onClick={(e) => {\r\n                                        nav(`/${post?.id}`);\r\n                                    }}\r\n                                >\r\n                                    {post?.url.length > 1 && <i className={cx('listPost-icon')}>{ListIcon}</i>}\r\n                                    <img alt=\"post-img\" src={post?.url[0].src} />\r\n                                </div>\r\n                            );\r\n                        } else {\r\n                            return (\r\n                                <div\r\n                                    key={post?.id}\r\n                                    className={cx('post-wrapper', 'video-wrapper')}\r\n                                    onClick={(e) => {\r\n                                        nav(`/${post?.id}`);\r\n                                    }}\r\n                                >\r\n                                    {post?.url.length > 1 && <i className={cx('listPost-icon')}>{ListIcon}</i>}\r\n                                    <video width=\"290\" muted className={cx('video')}>\r\n                                        <source src={post?.url[0].src} type=\"video/mp4\" />\r\n                                    </video>\r\n                                </div>\r\n                            );\r\n                        }\r\n                    })}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Explore;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"Explore_wrapper__Qizq+\",\"post-list\":\"Explore_post-list__jRGnR\",\"post-wrapper\":\"Explore_post-wrapper__QNa77\",\"listPost-icon\":\"Explore_listPost-icon__4gRij\",\"video\":\"Explore_video__SURML\"};"],"names":["cx","classNames","useState","posts","setPosts","indexPostObserved","setIndexPostObserved","nav","useNavigate","useEffect","unsubcribe","onSnapshot","collection","db","snapshot","newPosts","forEach","doc","push","id","data","handleScroll","e","scrollTop","document","body","documentElement","scrollHeight","clientHeight","Math","floor","prevIndex","window","addEventListener","removeEventListener","className","map","post","index","Fragment","url","type","includes","onClick","length","ListIcon","alt","src","width","muted"],"sourceRoot":""}