"use strict";(self.webpackChunkinstagram_clone=self.webpackChunkinstagram_clone||[]).push([[494],{1674:function(e,n,t){t.d(n,{Z:function(){return m}});var a=t(9439),i=t(9448),o=t.n(i),c=t(2791),r=t(7689),l=t(4446),s=t(184),d=o().bind({wrapper:"Comment_wrapper__0wVGF",account:"Comment_account__MRUPN",avatar:"Comment_avatar__drCcj",about:"Comment_about__bqJVu",name:"Comment_name__fkuWP",time__cmt:"Comment_time__cmt__CWdYN"});function u(e){var n=e.cmt,t=(0,c.useState)(""),i=(0,a.Z)(t,2),o=i[0],u=i[1],m=(0,c.useState)(""),v=(0,a.Z)(m,2),p=v[0],f=v[1],_=(0,l.i)().getUserByEmail,h=(0,r.s0)();return(0,c.useEffect)((function(){var e,t,a=(null===n||void 0===n?void 0:n.timestampSecond)||"",i=new Date(1e3*a),o=new Date,c=(e=i,(t=o).getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())),r=o.getFullYear()-i.getFullYear(),l=Math.abs(o-i)/1e3,s=Math.floor(l/86400);l-=86400*s;var d=Math.floor(l/3600)%24;l-=3600*d;var m=Math.floor(l/60)%60;l-=60*m;var v=Math.round(l%60);u(r<1?c>=1?"".concat(c," TH\xc1NG TR\u01af\u1edaC"):s<1?d<1?m<1?"".concat(v," GI\xc2Y TR\u01af\u1edaC"):"".concat(m," PH\xdaT TR\u01af\u1edaC"):"".concat(d," GI\u1edc TR\u01af\u1edaC"):"".concat(s," NG\xc0Y TR\u01af\u1edaC"):"N\u0102M ".concat(r," TH\xc1NG ").concat(c," NG\xc0Y ").concat(s))}),[null===n||void 0===n?void 0:n.timestampSecond]),(0,c.useEffect)((function(){var e;f(null===(e=_("".concat(null===n||void 0===n?void 0:n.useremail)))||void 0===e?void 0:e.information.avatar)}),[null===n||void 0===n?void 0:n.useremail,_]),(0,s.jsxs)("div",{className:d("wrapper"),children:[(0,s.jsx)("div",{className:d("account"),onClick:function(e){return h("/personalPage/".concat(n.useremail))},children:(0,s.jsx)("div",{className:d("avatar"),children:(0,s.jsx)("img",{src:p||"http://phunuvietnam.mediacdn.vn/media/news/33abffcedac43a654ac7f501856bf700/anh-profile-tiet-lo-g-ve-ban-1.jpg",alt:"avatar"})})}),(0,s.jsxs)("div",{className:d("about"),children:[(0,s.jsx)("span",{className:d("name"),children:null===n||void 0===n?void 0:n.username}),(0,s.jsx)("span",{className:d("cmt"),children:null===n||void 0===n?void 0:n.comment}),(0,s.jsx)("div",{className:d("info__cmt"),children:(0,s.jsx)("p",{className:d("time__cmt"),children:o||""})})]})]})}var m=(0,c.memo)(u)},6494:function(e,n,t){t.r(n),t.d(n,{default:function(){return k}});var a=t(1413),i=t(9439),o=t(9448),c=t.n(o),r=t(2791),l=t(9514),s=t(7799),d=t(7084),u=t(4165),m=t(3433),v=t(5861),p=t(4499),f=t(9922),_=t(1674),h=t(7689),x=t(4446),j=t(184),w=c().bind({"video-wrapper":"ReelVideo_video-wrapper__dmmbP","account-wrapper":"ReelVideo_account-wrapper__Kec4k","account-wrapper--caption":"ReelVideo_account-wrapper--caption__-mjPp","video-container":"ReelVideo_video-container__JhO0J",video:"ReelVideo_video__SXoWp","volume-icon":"ReelVideo_volume-icon__gQ2rn","pause-icon":"ReelVideo_pause-icon__vXrku","icons-container":"ReelVideo_icons-container__7XtI4","like-wrapper":"ReelVideo_like-wrapper__9dVKV","cmt-wrapper":"ReelVideo_cmt-wrapper__n3U0r","cmt-modal":"ReelVideo_cmt-modal__rbEg2","cmt-container":"ReelVideo_cmt-container__mwUma","cmt-header":"ReelVideo_cmt-header__kfklp","cmt-header--icon":"ReelVideo_cmt-header--icon__lBY33","cmt-list":"ReelVideo_cmt-list__RP+OA","upload-cmt":"ReelVideo_upload-cmt__QzP4N",wrapper:"ReelVideo_wrapper__juJ2n"});var g=function(e){var n=e.reel,t=e.user,o=e.username,c=e.userAvatar,d=(0,r.useState)(!1),g=(0,i.Z)(d,2),N=g[0],k=g[1],b=(0,r.useState)(!0),C=(0,i.Z)(b,2),Z=C[0],R=C[1],V=(0,r.useState)(!0),E=(0,i.Z)(V,2),S=E[0],M=E[1],P=(0,r.useState)(""),T=(0,i.Z)(P,2),J=T[0],U=T[1],y=(0,r.useState)([]),Y=(0,i.Z)(y,2),D=Y[0],G=Y[1],X=(0,r.useState)(""),F=(0,i.Z)(X,2),B=F[0],H=F[1],I=(0,r.useState)([]),K=(0,i.Z)(I,2),O=K[0],A=K[1],W=(0,r.useState)(!1),q=(0,i.Z)(W,2),z=q[0],L=q[1],Q=(0,r.useRef)(),$=(0,h.s0)(),ee=(0,x.i)().getUserByEmail;(0,r.useEffect)((function(){var e;U(null===(e=ee("".concat(null===n||void 0===n?void 0:n.useremail)))||void 0===e?void 0:e.information.avatar);var t=(0,s.cf)((0,s.JU)(l.db,"posts","".concat(null===n||void 0===n?void 0:n.id)),(function(e){var n;G(null===(n=e.data())||void 0===n?void 0:n.likeds)})),i=(0,s.IO)((0,s.hJ)(l.db,"posts/".concat(null===n||void 0===n?void 0:n.id,"/comments")),(0,s.Xo)("timestamp","desc")),o=(0,s.cf)(i,(function(e){var n=[];e.forEach((function(e){n.push((0,a.Z)({id:e.id},e.data()))})),A(n)}));return function(){o(),t()}}),[n,ee]);var ne=function(e){!1===Q.current.paused?(Q.current.pause(),M(!0)):(Q.current.play(),M(!1))},te=function(){var e=(0,v.Z)((0,u.Z)().mark((function e(){var a;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=(0,s.JU)(l.db,"posts","".concat(null===n||void 0===n?void 0:n.id)),e.next=3,(0,s.r7)(a,{likeds:[].concat((0,m.Z)(D),[null===t||void 0===t?void 0:t.email])});case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ae=function(){var e=(0,v.Z)((0,u.Z)().mark((function e(){var a,i;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=(0,s.JU)(l.db,"posts","".concat(null===n||void 0===n?void 0:n.id)),i=D.filter((function(e){return e!==(null===t||void 0===t?void 0:t.email)})),e.next=4,(0,s.r7)(a,{likeds:(0,m.Z)(i)});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ie=function(e){(0,s.ET)((0,s.hJ)(l.db,"posts/".concat(null===n||void 0===n?void 0:n.id,"/comments")),{timestampSecond:Math.floor(Date.now()/1e3),timestamp:(0,s.Bt)(),comment:B,username:o,useremail:null===t||void 0===t?void 0:t.email}),H("")},oe=function(e){H(""),L(!1)};return(0,j.jsxs)("div",{className:w("video-wrapper"),children:[!0===z&&(0,j.jsx)("div",{className:w("cmt-modal"),onClick:oe,children:(0,j.jsxs)("div",{className:w("cmt-container"),onClick:function(e){return e.stopPropagation()},children:[(0,j.jsxs)("div",{className:w("cmt-header"),children:[(0,j.jsx)("strong",{children:"B\xecnh lu\u1eadn"}),(0,j.jsx)("i",{className:w("cmt-header--icon"),onClick:oe,children:"X"})]}),(0,j.jsx)("div",{className:w("cmt-list"),children:O.map((function(e,n){return(0,j.jsx)(_.Z,{cmt:e},n)}))}),(0,j.jsxs)("div",{className:w("upload-cmt"),children:[(0,j.jsx)("img",{alt:"avatar-upload-cmt",src:c}),(0,j.jsx)("input",{type:"text",placeholder:"Th\xeam b\xecnh lu\u1eadn...",value:B,onChange:function(e){return H(e.target.value)},onKeyDown:function(e){if("Enter"===e.code){if(0===B.length)return;ie()}}}),(0,j.jsx)("button",{disabled:0===B.length,onClick:ie,children:"\u0110\u0103ng"})]})]})}),(0,j.jsxs)("div",{className:w("account-wrapper"),children:[(0,j.jsx)("div",{onClick:function(e){return $("/personalPage/".concat(n.useremail))},children:(0,j.jsx)(f.Z,{name:null===n||void 0===n?void 0:n.username,img:J})}),(0,j.jsx)("p",{className:w("account-wrapper--caption"),onClick:function(e){k(!N)},children:function(e){var n=e.split("");if(n.length<40)return e;if(!1===N)return e.slice(0,40)+" ...Xem th\xeam";for(var t=1;t<=e.length;t++)t%40===0&&n.splice(t,0,(0,j.jsx)("br",{},t));return n}(null===n||void 0===n?void 0:n.caption)})]}),(0,j.jsxs)("div",{className:w("video-container"),children:[!0===S&&(0,j.jsx)("p",{className:w("pause-icon"),onClick:ne,onDoubleClick:function(e){return e.stopPropagation()},children:p.o1}),(0,j.jsx)("p",{className:w("volume-icon"),onClick:function(e){!0===Q.current.muted?R(!1):R(!0)},onDoubleClick:function(e){return e.stopPropagation()},children:Z?p.qD:p.eU}),(0,j.jsx)("video",{ref:Q,width:"400",onClick:ne,loop:!0,muted:Z,className:w("video"),children:(0,j.jsx)("source",{src:null===n||void 0===n?void 0:n.url[0].src,type:"video/mp4"})})]}),(0,j.jsxs)("div",{className:w("icons-container"),children:[(0,j.jsxs)("div",{className:w("like-wrapper"),children:[(0,j.jsx)("p",{onClick:function(e){D.includes(null===t||void 0===t?void 0:t.email)?ae():te()},children:D.includes(null===t||void 0===t?void 0:t.email)?p.cK:p.lM}),(0,j.jsx)("p",{children:null===n||void 0===n?void 0:n.likeds.length})]}),(0,j.jsxs)("div",{className:w("cmt-wrapper"),onClick:function(e){return L(!0)},children:[(0,j.jsx)("p",{children:p.t6}),(0,j.jsx)("p",{children:O.length})]})]})]})},N=c().bind({wrapper:"Reels_wrapper__lzocb"});var k=function(){var e=(0,r.useState)([]),n=(0,i.Z)(e,2),t=n[0],o=n[1],c=(0,r.useState)(""),u=(0,i.Z)(c,2),m=u[0],v=u[1],p=(0,r.useState)(""),f=(0,i.Z)(p,2),_=f[0],h=f[1],x=(0,d._)().user,w=(0,r.useState)(4),k=(0,i.Z)(w,2),b=k[0],C=k[1],Z=function(e){var n=document.body.scrollTop||document.documentElement.scrollTop,t=document.documentElement.scrollHeight,a=document.documentElement.clientHeight;Math.floor(n/(t-a)*100)>=90&&C((function(e){return e+4}))};return(0,r.useEffect)((function(){return window.addEventListener("scroll",Z),function(){return window.removeEventListener("scroll",Z)}})),(0,r.useEffect)((function(){var e=(0,s.IO)((0,s.hJ)(l.db,"posts"),(0,s.Xo)("timestamp","desc")),n=(0,s.cf)(e,(function(e){var n=[];e.forEach((function(e){e.data().reels&&!0===e.data().reels&&n.push((0,a.Z)({id:e.id},e.data()))})),o(n)}));return function(){n()}}),[]),(0,r.useEffect)((function(){(0,s.cf)((0,s.JU)(l.db,"users","".concat(null===x||void 0===x?void 0:x.email)),(function(e){var n,t;h(null===(n=e.data())||void 0===n?void 0:n.information.avatar),v(null===(t=e.data())||void 0===t?void 0:t.information.name)}))}),[null===x||void 0===x?void 0:x.email]),(0,j.jsx)("div",{className:N("wrapper"),children:t.map((function(e,n){return n>b?(0,j.jsx)(r.Fragment,{},n):(0,j.jsx)(g,{reel:e,user:x,username:m,userAvatar:_},null===e||void 0===e?void 0:e.id)}))})}}}]);
//# sourceMappingURL=494.730a1c26.chunk.js.map