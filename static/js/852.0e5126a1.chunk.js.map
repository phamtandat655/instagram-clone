{"version":3,"file":"static/js/852.0e5126a1.chunk.js","mappings":"oRAUMA,EAAKC,IAAAA,KCTX,CAAgB,QAAU,gCAAgC,UAAY,kCAAkC,iBAAmB,yCAAyC,4BAA4B,kDAAkD,oBAAoB,0CAA0C,qBAAqB,2CAA2C,0BAA0B,kDDwF1Y,MA7EA,WACI,IAAQC,GAAUC,EAAAA,EAAAA,KAAVD,MACAE,GAASC,EAAAA,EAAAA,KAATD,KACR,GAAoCE,EAAAA,EAAAA,UAAS,IAAG,eAAzCC,EAAU,KAAEC,EAAa,KAChC,GAA0CF,EAAAA,EAAAA,UAAS,IAAG,eAA/CG,EAAa,KAAEC,EAAgB,KAChCC,GAAMC,EAAAA,EAAAA,OAEZC,EAAAA,EAAAA,YAAU,YACNC,EAAAA,EAAAA,KAAWC,EAAAA,EAAAA,IAAIC,EAAAA,GAAI,QAAQ,GAAD,OAAS,OAAJZ,QAAI,IAAJA,OAAI,EAAJA,EAAMa,SAAU,SAACF,GAAS,IAAD,EACpDP,EAAwB,QAAX,EAACO,EAAIG,cAAM,aAAV,EAAYC,QAC9B,GACJ,GAAG,CAAK,OAAJf,QAAI,IAAJA,OAAI,EAAJA,EAAMa,QAEV,IAAMG,EAAe,SAACC,GAClB,IAAMC,EAAYC,SAASC,KAAKF,WAAaC,SAASE,gBAAgBH,UAChEI,EAAeH,SAASE,gBAAgBC,aACxCC,EAAeJ,SAASE,gBAAgBE,aAE3BC,KAAKC,MAAOP,GAAaI,EAAeC,GAAiB,MAC1D,IACdjB,GAAiB,SAACoB,GAAS,OAAKA,EAAY,EAAE,GAEtD,GAEAjB,EAAAA,EAAAA,YAAU,WAGN,OAFAkB,OAAOC,iBAAiB,SAAUZ,GAE3B,kBAAMW,OAAOE,oBAAoB,SAAUb,EAAc,CACpE,IAEA,IAAIc,GAAiBC,EAAAA,EAAAA,UAAQ,WACzB,OAAI5B,GAAcL,EACPA,EAAMkC,QAAO,SAACC,EAAGC,GAAW,IAAD,EAC9B,OACK/B,EAAWgC,MAAK,SAACC,GAAS,iBAAc,OAATA,QAAS,IAATA,GAAe,QAAN,EAATA,EAAWC,YAAI,OAAa,QAAb,EAAf,EAAiBC,mBAAW,WAAnB,EAAT,EAA8BzB,UAAW,OAADoB,QAAC,IAADA,GAAc,QAAb,EAADA,EAAGK,mBAAW,WAAb,EAAD,EAAgBzB,MAAK,MAC5F,OAADoB,QAAC,IAADA,GAAc,QAAb,EAADA,EAAGK,mBAAW,WAAb,EAAD,EAAgBzB,UAAc,OAAJb,QAAI,IAAJA,OAAI,EAAJA,EAAMa,MAExC,IAEG,IACX,GAAG,CAACf,EAAOK,EAAgB,OAAJH,QAAI,IAAJA,OAAI,EAAJA,EAAMa,QAE7B,OACI,gBAAK0B,UAAW3C,EAAG,WAAW,UAC1B,iBAAK2C,UAAW3C,EAAG,aAAa,WAC5B,cAAG2C,UAAW3C,EAAG,oBAAoB,SAAC,mBACtC,gBAAK2C,UAAW3C,EAAG,oBAAoB,SAClCkC,GACGA,EAAeU,KAAI,SAACP,EAAGC,GACnB,OAAIA,GAAS7B,GACF,gBAAiBkC,UAAW3C,EAAG,SAArBsC,IAGb,gBAEIK,UAAW3C,EAAG,2BACd6C,QAAS,SAACxB,GAAO,IAAD,EACZV,EAAI,iBAAD,OAAmB,OAAD0B,QAAC,IAADA,GAAc,QAAb,EAADA,EAAGK,mBAAW,WAAb,EAAD,EAAgBzB,OACzC,EAAE,UAEF,SAAC6B,EAAA,EAAO,CACJC,YAAaV,EACbW,KAAK,6BACLC,QAAM,EACN1C,WAAYA,EACZ2C,UAAU,oBAXTZ,EAgBrB,UAKxB,C","sources":["pages/RecommendUsers/RecommendUsers.js","webpack://instagram-clone/./src/pages/RecommendUsers/RecommendUsers.module.scss?67af"],"sourcesContent":["import classNames from 'classnames/bind';\r\nimport styles from './RecommendUsers.module.scss';\r\nimport { UseFireBase } from '../../Context/FireBaseContext';\r\nimport { UserAuth } from '../../Context/AuthContext';\r\nimport { useEffect, useMemo, useState } from 'react';\r\nimport Account from '../../components/Account/Account';\r\nimport { doc, onSnapshot } from 'firebase/firestore';\r\nimport { db } from '../../firebase';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nconst cx = classNames.bind(styles);\r\n\r\nfunction RecommendUsers() {\r\n    const { users } = UseFireBase();\r\n    const { user } = UserAuth();\r\n    const [followings, setFollowings] = useState([]);\r\n    const [IndexObserved, setIndexObserved] = useState(50);\r\n    const nav = useNavigate();\r\n\r\n    useEffect(() => {\r\n        onSnapshot(doc(db, 'users', `${user?.email}`), (doc) => {\r\n            setFollowings(doc.data()?.follows);\r\n        });\r\n    }, [user?.email]);\r\n\r\n    const handleScroll = (e) => {\r\n        const scrollTop = document.body.scrollTop || document.documentElement.scrollTop;\r\n        const scrollHeight = document.documentElement.scrollHeight;\r\n        const clientHeight = document.documentElement.clientHeight;\r\n\r\n        const percentage = Math.floor((scrollTop / (scrollHeight - clientHeight)) * 100);\r\n        if (percentage >= 90) {\r\n            setIndexObserved((prevIndex) => prevIndex + 20);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        window.addEventListener('scroll', handleScroll);\r\n\r\n        return () => window.removeEventListener('scroll', handleScroll);\r\n    });\r\n\r\n    let recommendUsers = useMemo(() => {\r\n        if (followings && users) {\r\n            return users.filter((u, index) => {\r\n                return (\r\n                    !followings.find((following) => following?.User?.information?.email === u?.information?.email) &&\r\n                    u?.information?.email !== user?.email\r\n                );\r\n            });\r\n        }\r\n        return null;\r\n    }, [users, followings, user?.email]);\r\n\r\n    return (\r\n        <div className={cx('wrapper')}>\r\n            <div className={cx('recommend')}>\r\n                <p className={cx('recommend__title')}>Gợi ý</p>\r\n                <div className={cx('recommend--users')}>\r\n                    {recommendUsers &&\r\n                        recommendUsers.map((u, index) => {\r\n                            if (index >= IndexObserved) {\r\n                                return <div key={index} className={cx('hide')}></div>;\r\n                            } else {\r\n                                return (\r\n                                    <div\r\n                                        key={index}\r\n                                        className={cx('recommend--user-wrapper')}\r\n                                        onClick={(e) => {\r\n                                            nav(`/personalPage/${u?.information?.email}`);\r\n                                        }}\r\n                                    >\r\n                                        <Account\r\n                                            userAccount={u}\r\n                                            note=\"Gợi ý cho bạn\"\r\n                                            follow\r\n                                            followings={followings}\r\n                                            recommend=\"recommend-home\"\r\n                                        />\r\n                                    </div>\r\n                                );\r\n                            }\r\n                        })}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default RecommendUsers;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"RecommendUsers_wrapper__4uhjL\",\"recommend\":\"RecommendUsers_recommend__NceRg\",\"recommend__title\":\"RecommendUsers_recommend__title__oPcRO\",\"recommend--header-wrapper\":\"RecommendUsers_recommend--header-wrapper__oHoaZ\",\"recommend--header\":\"RecommendUsers_recommend--header__GZ+hk\",\"recommend--see-all\":\"RecommendUsers_recommend--see-all__pc+z2\",\"recommend--user-wrapper\":\"RecommendUsers_recommend--user-wrapper__RF77y\"};"],"names":["cx","classNames","users","UseFireBase","user","UserAuth","useState","followings","setFollowings","IndexObserved","setIndexObserved","nav","useNavigate","useEffect","onSnapshot","doc","db","email","data","follows","handleScroll","e","scrollTop","document","body","documentElement","scrollHeight","clientHeight","Math","floor","prevIndex","window","addEventListener","removeEventListener","recommendUsers","useMemo","filter","u","index","find","following","User","information","className","map","onClick","Account","userAccount","note","follow","recommend"],"sourceRoot":""}