{"version":3,"file":"static/js/494.41c7c518.chunk.js","mappings":"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","sources":["components/Comment/Comment.js","webpack://instagram-clone/./src/components/Comment/Comment.module.scss?34ce","components/ReelVideo/ReelVideo.js","webpack://instagram-clone/./src/components/ReelVideo/ReelVideo.module.scss?b6f3","pages/Reels/Reels.js","webpack://instagram-clone/./src/pages/Reels/Reels.module.scss?13e0"],"sourcesContent":["import classNames from 'classnames/bind';\r\nimport styles from './Comment.module.scss';\r\nimport { useEffect, useState, memo } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { UseFireBase } from '../../Context/FireBaseContext';\r\n\r\nconst cx = classNames.bind(styles);\r\n\r\nfunction Comment({ cmt }) {\r\n    const [time, setTime] = useState('');\r\n    const [avatar, setAvatar] = useState('');\r\n    const { getUserByEmail } = UseFireBase();\r\n\r\n    const nav = useNavigate();\r\n\r\n    useEffect(() => {\r\n        const timestamp = {\r\n            seconds: cmt?.timestampSecond || '',\r\n        };\r\n        const postDate = new Date(timestamp.seconds * 1000);\r\n        const nowDate = new Date();\r\n\r\n        const months = getMonthDifference(postDate, nowDate);\r\n        const years = nowDate.getFullYear() - postDate.getFullYear();\r\n\r\n        // get total seconds between the times\r\n        let delta = Math.abs(nowDate - postDate) / 1000;\r\n        // calculate (and subtract) whole days\r\n        let days = Math.floor(delta / 86400);\r\n        delta -= days * 86400;\r\n        // calculate (and subtract) whole hours\r\n        let hours = Math.floor(delta / 3600) % 24;\r\n        delta -= hours * 3600;\r\n        // calculate (and subtract) whole minutes\r\n        let minutes = Math.floor(delta / 60) % 60;\r\n        delta -= minutes * 60;\r\n        // what's left is seconds\r\n        let seconds = Math.round(delta % 60); // in theory the modulus is not required\r\n\r\n        if (years < 1) {\r\n            if (months >= 1) {\r\n                setTime(`${months} THÁNG TRƯỚC`);\r\n            } else {\r\n                if (days < 1) {\r\n                    if (hours < 1) {\r\n                        if (minutes < 1) {\r\n                            setTime(`${seconds} GIÂY TRƯỚC`);\r\n                        } else {\r\n                            setTime(`${minutes} PHÚT TRƯỚC`);\r\n                        }\r\n                    } else {\r\n                        setTime(`${hours} GIỜ TRƯỚC`);\r\n                    }\r\n                } else {\r\n                    setTime(`${days} NGÀY TRƯỚC`);\r\n                }\r\n            }\r\n        } else {\r\n            setTime(`NĂM ${years} THÁNG ${months} NGÀY ${days}`);\r\n        }\r\n\r\n        function getMonthDifference(startDate, endDate) {\r\n            return endDate.getMonth() - startDate.getMonth() + 12 * (endDate.getFullYear() - startDate.getFullYear());\r\n        }\r\n    }, [cmt?.timestampSecond]);\r\n\r\n    useEffect(() => {\r\n        setAvatar(getUserByEmail(`${cmt?.useremail}`)?.information.avatar);\r\n    }, [cmt?.useremail, getUserByEmail]);\r\n\r\n    return (\r\n        <div className={cx('wrapper')}>\r\n            <div className={cx('account')} onClick={(e) => nav(`/personalPage/${cmt.useremail}`)}>\r\n                <div className={cx('avatar')}>\r\n                    <img\r\n                        src={\r\n                            avatar ||\r\n                            'http://phunuvietnam.mediacdn.vn/media/news/33abffcedac43a654ac7f501856bf700/anh-profile-tiet-lo-g-ve-ban-1.jpg'\r\n                        }\r\n                        alt=\"avatar\"\r\n                    />\r\n                </div>\r\n            </div>\r\n            <div className={cx('about')}>\r\n                <span className={cx('name')}>{cmt?.username}</span>\r\n                <span className={cx('cmt')}>{cmt?.comment}</span>\r\n                <div className={cx('info__cmt')}>\r\n                    <p className={cx('time__cmt')}>{time ? time : ''}</p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default memo(Comment);\r\n","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"Comment_wrapper__0wVGF\",\"account\":\"Comment_account__MRUPN\",\"avatar\":\"Comment_avatar__drCcj\",\"about\":\"Comment_about__bqJVu\",\"name\":\"Comment_name__fkuWP\",\"time__cmt\":\"Comment_time__cmt__CWdYN\"};","import classNames from 'classnames/bind';\r\nimport styles from './ReelVideo.module.scss';\r\nimport { VolumeIcon, VolumeMutedIcon, PlayIcon, LikeIcon, LikedIcon, CmtIcon } from '../../assets/Icons/Icons';\r\nimport { doc, updateDoc, onSnapshot, addDoc, serverTimestamp, collection, orderBy, query } from 'firebase/firestore';\r\nimport Account from '../Account/Account';\r\nimport Comment from '../Comment/Comment';\r\nimport { db } from '../../firebase';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useState, useRef, useEffect } from 'react';\r\nimport { UseFireBase } from '../../Context/FireBaseContext';\r\n\r\nconst cx = classNames.bind(styles);\r\n\r\nfunction ReelVideo({ reel, user, username, userAvatar }) {\r\n    const [seeMore, setSeeMore] = useState(false);\r\n    const [muted, setMuted] = useState(true);\r\n    const [pause, setPause] = useState(true);\r\n    const [avatar, setAvatar] = useState('');\r\n    const [likedsList, setLikedsList] = useState([]);\r\n    const [inputValue, setInputValue] = useState('');\r\n    const [comments, setComments] = useState([]);\r\n    const [showCmtsModal, setShowCmtsModal] = useState(false);\r\n\r\n    const videoRef = useRef();\r\n    const nav = useNavigate();\r\n    const { getUserByEmail } = UseFireBase();\r\n\r\n    useEffect(() => {\r\n        setAvatar(getUserByEmail(`${reel?.useremail}`)?.information.avatar);\r\n\r\n        const unsubcribe3 = onSnapshot(doc(db, 'posts', `${reel?.id}`), (doc) => {\r\n            setLikedsList(doc.data()?.likeds);\r\n        });\r\n\r\n        const q2 = query(collection(db, `posts/${reel?.id}/comments`), orderBy('timestamp', 'desc'));\r\n        const unsubcribe2 = onSnapshot(q2, (snapshot) => {\r\n            let newComments = [];\r\n            snapshot.forEach((doc) => {\r\n                newComments.push({\r\n                    id: doc.id,\r\n                    ...doc.data(),\r\n                });\r\n            });\r\n            setComments(newComments);\r\n        });\r\n\r\n        return () => {\r\n            unsubcribe2();\r\n            unsubcribe3();\r\n        };\r\n    }, [reel, getUserByEmail]);\r\n\r\n    const handleClickVideo = (e) => {\r\n        if (videoRef.current.paused === false) {\r\n            videoRef.current.pause();\r\n            setPause(true);\r\n        } else {\r\n            videoRef.current.play();\r\n            setPause(false);\r\n        }\r\n    };\r\n    const handleVolume = (e) => {\r\n        if (videoRef.current.muted === true) {\r\n            setMuted(false);\r\n        } else {\r\n            setMuted(true);\r\n        }\r\n    };\r\n\r\n    const handleCaption = (caption) => {\r\n        let newCap = caption.split('');\r\n        if (newCap.length < 40) return caption;\r\n        else {\r\n            if (seeMore === false) {\r\n                return caption.slice(0, 40) + ' ...Xem thêm';\r\n            }\r\n            for (let i = 1; i <= caption.length; i++) {\r\n                if (i % 40 === 0) {\r\n                    newCap.splice(i, 0, <br key={i} />);\r\n                }\r\n            }\r\n        }\r\n        return newCap;\r\n    };\r\n\r\n    const handleClickLike = (e) => {\r\n        if (likedsList.includes(user?.email)) {\r\n            handleUnLikePost();\r\n        } else {\r\n            handleLikePost();\r\n        }\r\n    };\r\n\r\n    const handleLikePost = async () => {\r\n        const docRef = doc(db, 'posts', `${reel?.id}`);\r\n        await updateDoc(docRef, {\r\n            likeds: [...likedsList, user?.email],\r\n        });\r\n    };\r\n    const handleUnLikePost = async () => {\r\n        const docRef = doc(db, 'posts', `${reel?.id}`);\r\n        let newLikeds = likedsList.filter((likedIdPost) => likedIdPost !== user?.email);\r\n        await updateDoc(docRef, {\r\n            likeds: [...newLikeds],\r\n        });\r\n    };\r\n    const handleUploadComment = (e) => {\r\n        addDoc(collection(db, `posts/${reel?.id}/comments`), {\r\n            timestampSecond: Math.floor(Date.now() / 1000),\r\n            timestamp: serverTimestamp(),\r\n            comment: inputValue,\r\n            username: username,\r\n            useremail: user?.email,\r\n        });\r\n        setInputValue('');\r\n    };\r\n\r\n    const handleCloseCmtsModal = (e) => {\r\n        setInputValue('');\r\n        setShowCmtsModal(false);\r\n    };\r\n    return (\r\n        <div className={cx('video-wrapper')}>\r\n            {showCmtsModal === true && (\r\n                <div className={cx('cmt-modal')} onClick={handleCloseCmtsModal}>\r\n                    <div className={cx('cmt-container')} onClick={(e) => e.stopPropagation()}>\r\n                        <div className={cx('cmt-header')}>\r\n                            <strong>Bình luận</strong>\r\n                            <i className={cx('cmt-header--icon')} onClick={handleCloseCmtsModal}>\r\n                                X\r\n                            </i>\r\n                        </div>\r\n                        <div className={cx('cmt-list')}>\r\n                            {comments.map((cmt, index) => (\r\n                                <Comment cmt={cmt} key={index} />\r\n                            ))}\r\n                        </div>\r\n                        <div className={cx('upload-cmt')}>\r\n                            <img alt=\"avatar-upload-cmt\" src={userAvatar} />\r\n                            <input\r\n                                type=\"text\"\r\n                                placeholder=\"Thêm bình luận...\"\r\n                                value={inputValue}\r\n                                onChange={(e) => setInputValue(e.target.value)}\r\n                                onKeyDown={(e) => {\r\n                                    if (e.code === 'Enter') {\r\n                                        if (inputValue.length === 0) return;\r\n                                        else handleUploadComment();\r\n                                    }\r\n                                }}\r\n                            />\r\n                            <button disabled={inputValue.length === 0} onClick={handleUploadComment}>\r\n                                Đăng\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n            <div className={cx('account-wrapper')}>\r\n                <div onClick={(e) => nav(`/personalPage/${reel.useremail}`)}>\r\n                    <Account name={reel?.username} img={avatar} />\r\n                </div>\r\n                <p\r\n                    className={cx('account-wrapper--caption')}\r\n                    onClick={(e) => {\r\n                        setSeeMore(!seeMore);\r\n                    }}\r\n                >\r\n                    {handleCaption(reel?.caption)}\r\n                </p>\r\n            </div>\r\n            <div className={cx('video-container')}>\r\n                {pause === true && (\r\n                    <p\r\n                        className={cx('pause-icon')}\r\n                        onClick={handleClickVideo}\r\n                        onDoubleClick={(e) => e.stopPropagation()}\r\n                    >\r\n                        {PlayIcon}\r\n                    </p>\r\n                )}\r\n                <p className={cx('volume-icon')} onClick={handleVolume} onDoubleClick={(e) => e.stopPropagation()}>\r\n                    {muted ? VolumeMutedIcon : VolumeIcon}\r\n                </p>\r\n                <video\r\n                    ref={videoRef}\r\n                    width=\"400\"\r\n                    // autoPlay\r\n                    onClick={handleClickVideo}\r\n                    loop\r\n                    muted={muted}\r\n                    className={cx('video')}\r\n                >\r\n                    <source src={reel?.url[0].src} type=\"video/mp4\" />\r\n                </video>\r\n            </div>\r\n            <div className={cx('icons-container')}>\r\n                <div className={cx('like-wrapper')}>\r\n                    <p onClick={(e) => handleClickLike()}>{likedsList.includes(user?.email) ? LikedIcon : LikeIcon}</p>\r\n                    <p>{reel?.likeds.length}</p>\r\n                </div>\r\n                <div className={cx('cmt-wrapper')} onClick={(e) => setShowCmtsModal(true)}>\r\n                    <p>{CmtIcon}</p>\r\n                    <p>{comments.length}</p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default ReelVideo;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"video-wrapper\":\"ReelVideo_video-wrapper__dmmbP\",\"account-wrapper\":\"ReelVideo_account-wrapper__Kec4k\",\"account-wrapper--caption\":\"ReelVideo_account-wrapper--caption__-mjPp\",\"video-container\":\"ReelVideo_video-container__JhO0J\",\"video\":\"ReelVideo_video__SXoWp\",\"volume-icon\":\"ReelVideo_volume-icon__gQ2rn\",\"pause-icon\":\"ReelVideo_pause-icon__vXrku\",\"icons-container\":\"ReelVideo_icons-container__7XtI4\",\"like-wrapper\":\"ReelVideo_like-wrapper__9dVKV\",\"cmt-wrapper\":\"ReelVideo_cmt-wrapper__n3U0r\",\"cmt-modal\":\"ReelVideo_cmt-modal__rbEg2\",\"cmt-container\":\"ReelVideo_cmt-container__mwUma\",\"cmt-header\":\"ReelVideo_cmt-header__kfklp\",\"cmt-header--icon\":\"ReelVideo_cmt-header--icon__lBY33\",\"cmt-list\":\"ReelVideo_cmt-list__RP+OA\",\"upload-cmt\":\"ReelVideo_upload-cmt__QzP4N\",\"wrapper\":\"ReelVideo_wrapper__juJ2n\"};","import classNames from 'classnames/bind';\r\nimport styles from './Reels.module.scss';\r\nimport { useEffect, useState, Fragment } from 'react';\r\nimport { db } from '../../firebase';\r\nimport { collection, onSnapshot, orderBy, query, doc } from 'firebase/firestore';\r\nimport { UserAuth } from '../../Context/AuthContext';\r\nimport ReelVideo from '../../components/ReelVideo/ReelVideo';\r\n\r\nconst cx = classNames.bind(styles);\r\n\r\nfunction Reels() {\r\n    const [reels, setReels] = useState([]);\r\n    const [username, setUsername] = useState('');\r\n    const [userAvatar, setUserAvatar] = useState('');\r\n\r\n    const { user } = UserAuth();\r\n    const [indexPostObserved, setIndexPostObserved] = useState(4);\r\n\r\n    const handleScroll = (e) => {\r\n        const scrollTop = document.body.scrollTop || document.documentElement.scrollTop;\r\n        const scrollHeight = document.documentElement.scrollHeight;\r\n        const clientHeight = document.documentElement.clientHeight;\r\n\r\n        const percentage = Math.floor((scrollTop / (scrollHeight - clientHeight)) * 100);\r\n        if (percentage >= 90) {\r\n            setIndexPostObserved((prevIndex) => prevIndex + 4);\r\n        }\r\n    };\r\n    useEffect(() => {\r\n        window.addEventListener('scroll', handleScroll);\r\n\r\n        return () => window.removeEventListener('scroll', handleScroll);\r\n    });\r\n\r\n    useEffect(() => {\r\n        const q = query(collection(db, 'posts'), orderBy('timestamp', 'desc'));\r\n        const unsubcribe = onSnapshot(q, (snapshot) => {\r\n            let newReelss = [];\r\n            snapshot.forEach((doc) => {\r\n                if (doc.data().reels && doc.data().reels === true) {\r\n                    newReelss.push({\r\n                        id: doc.id,\r\n                        ...doc.data(),\r\n                    });\r\n                }\r\n            });\r\n            setReels(newReelss);\r\n        });\r\n\r\n        return () => {\r\n            unsubcribe();\r\n        };\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        onSnapshot(doc(db, 'users', `${user?.email}`), (doc) => {\r\n            setUserAvatar(doc.data()?.information.avatar);\r\n            setUsername(doc.data()?.information.name);\r\n        });\r\n    }, [user?.email]);\r\n\r\n    return (\r\n        <div className={cx('wrapper')}>\r\n            {reels.map((reel, index) => {\r\n                if (index > indexPostObserved) {\r\n                    return <Fragment key={index}></Fragment>;\r\n                } else {\r\n                    return (\r\n                        <ReelVideo key={reel?.id} reel={reel} user={user} username={username} userAvatar={userAvatar} />\r\n                    );\r\n                }\r\n            })}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Reels;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"Reels_wrapper__lzocb\"};"],"names":["cx","classNames","Comment","cmt","useState","time","setTime","avatar","setAvatar","getUserByEmail","UseFireBase","nav","useNavigate","useEffect","startDate","endDate","timestamp","timestampSecond","postDate","Date","nowDate","months","getMonth","getFullYear","years","delta","Math","abs","days","floor","hours","minutes","seconds","round","useremail","information","className","onClick","e","src","alt","username","comment","memo","reel","user","userAvatar","seeMore","setSeeMore","muted","setMuted","pause","setPause","likedsList","setLikedsList","inputValue","setInputValue","comments","setComments","showCmtsModal","setShowCmtsModal","videoRef","useRef","unsubcribe3","onSnapshot","doc","db","id","data","likeds","q2","query","collection","orderBy","unsubcribe2","snapshot","newComments","forEach","push","handleClickVideo","current","paused","play","handleLikePost","docRef","updateDoc","email","handleUnLikePost","newLikeds","filter","likedIdPost","handleUploadComment","addDoc","now","serverTimestamp","handleCloseCmtsModal","stopPropagation","map","index","type","placeholder","value","onChange","target","onKeyDown","code","length","disabled","Account","name","img","caption","newCap","split","slice","i","splice","handleCaption","onDoubleClick","PlayIcon","VolumeMutedIcon","VolumeIcon","ref","width","loop","url","includes","LikedIcon","LikeIcon","CmtIcon","reels","setReels","setUsername","setUserAvatar","UserAuth","indexPostObserved","setIndexPostObserved","handleScroll","scrollTop","document","body","documentElement","scrollHeight","clientHeight","prevIndex","window","addEventListener","removeEventListener","q","unsubcribe","newReelss","Fragment"],"sourceRoot":""}